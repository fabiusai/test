
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Social Mockup</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
</head>
<body>
  <div class="tab-content active">
    <div id="news1-facebook" class="social-section active">
      <div class="mockup-container">Contenuto Facebook</div>
    </div>
    <div id="news1-linkedin" class="social-section">
      <div class="mockup-container">Contenuto LinkedIn</div>
    </div>
    <div id="news1-x" class="social-section">
      <div class="mockup-container">Contenuto X</div>
    </div>
    <div id="news1-instagram" class="social-section">
      <div class="mockup-container">Contenuto Instagram</div>
    </div>
  </div>
  <button onclick="downloadAllAsZip()">Scarica tutti i mockup (ZIP)</button>

  <script>
  
  function downloadAllAsZip() {
    const zip = new JSZip();
    const activeNews = document.querySelector('.tab-content.active');
    if (!activeNews) return alert("Nessuna news selezionata.");
    const sections = activeNews.querySelectorAll('.social-section');
    let done = 0;

    sections.forEach((section, index) => {
      const container = section.querySelector('.mockup-container');
      const platform = section.id.split('-')[1] || `platform${index + 1}`;

      const originalDisplay = section.style.display;
      section.style.display = 'block';

      html2canvas(container).then(canvas => {
        section.style.display = originalDisplay || '';
        canvas.toBlob(blob => {
          zip.file(`mockup_${platform}.jpg`, blob);
          done++;
          if (done === sections.length) {
            zip.generateAsync({type: 'blob'}).then(function(content) {
              const link = document.createElement('a');
              link.href = URL.createObjectURL(content);
              link.download = 'mockup_news.zip';
              link.click();
            });
          }
        }, 'image/jpeg', 1.0);
      });
    });
  }

  </script>
</body>
</html>
