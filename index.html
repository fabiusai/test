<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Mockup - Poste Italiane</title>
  <link rel="icon" type="image/ico" href="favicon.ico" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: 100vh;
      color: #333;
      line-height: 1.6;
    }

    .header {
      background: linear-gradient(135deg, #003d7a 0%, #0066cc 100%);
      color: white;
      padding: 2rem 0;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0, 61, 122, 0.15);
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 300;
      margin-bottom: 0.5rem;
      letter-spacing: -0.5px;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
      font-weight: 300;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .global-controls {
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      margin-bottom: 2rem;
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      position: relative;
      overflow: hidden;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .btn-primary {
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      color: #003d7a;
    }

    .btn-secondary {
      background: linear-gradient(135deg, #003d7a 0%, #0066cc 100%);
      color: white;
    }

    .btn-danger {
      background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
      color: white;
    }

    .btn-success {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn.loading {
      pointer-events: none;
      opacity: 0.8;
    }

    .btn.loading::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      margin: auto;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .news-section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      margin-bottom: 2rem;
    }

    .news-header {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 1.5rem;
      border-bottom: 1px solid #dee2e6;
    }

    .news-header h2 {
      color: #003d7a;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .news-header p {
      color: #6c757d;
      font-size: 0.95rem;
    }

    .news-tabs {
      display: flex;
      background: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
      overflow-x: auto;
    }

    .news-tabs button {
      background: none;
      border: none;
      padding: 1rem 1.5rem;
      color: #6c757d;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .news-tabs button:hover {
      background: rgba(255, 215, 0, 0.1);
      color: #003d7a;
    }

    .news-tabs button.active {
      background: white;
      color: #003d7a;
      border-bottom-color: #FFD700;
      font-weight: 600;
    }

    .social-tabs {
      display: flex;
      padding: 1rem;
      gap: 0.5rem;
      background: #f8f9fa;
      flex-wrap: wrap;
    }

    .social-tab {
      background: white;
      border: 2px solid #dee2e6;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 500;
      color: #6c757d;
      flex: 1;
      min-width: 120px;
      justify-content: center;
    }

    .social-tab:hover {
      border-color: #FFD700;
      background: rgba(255, 215, 0, 0.05);
    }

    .social-tab.active {
      border-color: #003d7a;
      background: #003d7a;
      color: white;
    }

    .social-tab.facebook.active { background: #1877f2; border-color: #1877f2; }
    .social-tab.linkedin.active { background: #0a66c2; border-color: #0a66c2; }
    .social-tab.twitter.active { background: #1da1f2; border-color: #1da1f2; }
    .social-tab.instagram.active { background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%); border-color: #e6683c; }

    .tab-content, .social-section {
      display: none;
    }

    .tab-content.active, .social-section.active {
      display: block;
    }

    .mockup-preview {
      padding: 2rem;
      background: #f8f9fa;
      display: flex;
      justify-content: center;
    }

    .mockup-container {
      background: white;
      width: 520px;
      max-width: 100%;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      position: relative;
    }

    .mockup-header {
      background: white;
      padding: 1rem;
      border-bottom: 1px solid #e9ecef;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .platform-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
    }

    .platform-icon.facebook { background: #1877f2; }
    .platform-icon.linkedin { background: #0a66c2; }
    .platform-icon.twitter { background: #1da1f2; }
    .platform-icon.instagram { background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%); }

    .platform-info h3 {
      color: #333;
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .platform-info p {
      color: #6c757d;
      font-size: 0.875rem;
    }

    .mockup-text {
      padding: 1rem 1.5rem;
      font-size: 15px;
      line-height: 1.5;
      white-space: pre-wrap;
      color: #333;
      background: white;
      min-height: 60px;
    }

    .mockup-text span.link {
      color: #1877f2;
      font-weight: 500;
    }

    .mockup-image {
      width: 100%;
      display: none;
      background: white;
      max-height: 400px;
      object-fit: cover;
    }

    .mockup-footer {
      background: #f8f9fa;
      padding: 0.75rem 1.5rem;
      border-top: 1px solid #e9ecef;
      display: flex;
      align-items: center;
      gap: 1rem;
      color: #6c757d;
      font-size: 0.875rem;
    }

    .controls {
      padding: 2rem;
      background: white;
      border-top: 1px solid #dee2e6;
    }

    .controls h3 {
      color: #003d7a;
      margin-bottom: 1rem;
      font-size: 1.25rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      color: #495057;
      font-weight: 500;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .form-control {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      font-family: inherit;
      resize: vertical;
    }

    .form-control:focus {
      outline: none;
      border-color: #FFD700;
      box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
    }

    .form-control[type="file"] {
      padding: 0.5rem;
      cursor: pointer;
    }

    .form-control[type="file"]::-webkit-file-upload-button {
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      color: #003d7a;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      margin-right: 1rem;
    }

    .controls-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .success-message {
      background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
      color: #155724;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
      display: none;
      align-items: center;
      gap: 0.5rem;
    }

    .success-message.show {
      display: flex;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      .header h1 {
        font-size: 2rem;
      }

      .global-controls {
        flex-direction: column;
        align-items: center;
      }

      .social-tabs {
        flex-direction: column;
      }

      .social-tab {
        min-width: auto;
      }

      .controls-buttons {
        flex-direction: column;
      }

      .mockup-container {
        width: 100%;
      }
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .loading-spinner {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #FFD700;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1><i class="fas fa-share-alt"></i> Social Mockup</h1>
    <p>Crea mockup professionali per i canali social di Poste Italiane</p>
  </div>

  <div class="container">
    <div class="global-controls">
      <button class="btn btn-danger" onclick="resetAllNews()">
        <i class="fas fa-trash-alt"></i>
        <span>Cancella tutto</span>
      </button>
      <button class="btn btn-primary" onclick="downloadAllAsZip()">
        <i class="fas fa-download"></i>
        <span>Scarica mockup (ZIP)</span>
      </button>
    </div>

    <div class="news-section">
      <div class="news-header">
        <h2><i class="fas fa-newspaper"></i> Gestione News</h2>
        <p>Seleziona la news da modificare e personalizza il contenuto per i diversi canali social</p>
      </div>

      <div class="news-tabs">
        <button onclick="showNews(1, event)" class="active">
          <i class="fas fa-file-alt"></i> News 1
        </button>
        <button onclick="showNews(2, event)">
          <i class="fas fa-file-alt"></i> News 2
        </button>
        <button onclick="showNews(3, event)">
          <i class="fas fa-file-alt"></i> News 3
        </button>
        <button onclick="showNews(4, event)">
          <i class="fas fa-file-alt"></i> News 4
        </button>
        <button onclick="showNews(5, event)">
          <i class="fas fa-file-alt"></i> News 5
        </button>
      </div>

      <!-- NEWS 1 -->
      <div class="tab-content active" id="news1">
        <div class="social-tabs">
          <div class="social-tab facebook active" onclick="showSocial(1, 'facebook', event)">
            <i class="fab fa-facebook-f"></i> Facebook
          </div>
          <div class="social-tab linkedin" onclick="showSocial(1, 'linkedin', event)">
            <i class="fab fa-linkedin-in"></i> LinkedIn
          </div>
          <div class="social-tab twitter" onclick="showSocial(1, 'x', event)">
            <i class="fab fa-x-twitter"></i> X (Twitter)
          </div>
          <div class="social-tab instagram" onclick="showSocial(1, 'instagram', event)">
            <i class="fab fa-instagram"></i> Instagram
          </div>
        </div>

        <div id="news1-facebook" class="social-section active">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon facebook">
                  <i class="fab fa-facebook-f"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news1-facebook"></div>
              <img class="mockup-image" id="img-news1-facebook" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 55</span>
                <span><i class="fas fa-comment"></i> 16 commenti</span>
                <span><i class="fas fa-share"></i> Condividi</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news1-linkedin" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon linkedin">
                  <i class="fab fa-linkedin-in"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news1-linkedin"></div>
              <img class="mockup-image" id="img-news1-linkedin" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 176</span>
                <span><i class="fas fa-comment"></i> 11 commenti</span>
                <span><i class="fas fa-share"></i> 19 condivisioni</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news1-x" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon twitter">
                  <i class="fab fa-x-twitter"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>@PosteItaliane • 1h</p>
                </div>
              </div>
              <div class="mockup-text" id="text-news1-x"></div>
              <img class="mockup-image" id="img-news1-x" />
              <div class="mockup-footer">
                <span><i class="fas fa-comment"></i> 28</span>
                <span><i class="fas fa-retweet"></i> 72</span>
                <span><i class="fas fa-heart"></i> 266</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news1-instagram" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon instagram">
                  <i class="fab fa-instagram"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora</p>
                </div>
              </div>
              <img class="mockup-image" id="img-news1-instagram" />
              <div class="mockup-text" id="text-news1-instagram"></div>
              <div class="mockup-footer">
                <span><i class="fas fa-heart"></i> Piace a 118 persone</span>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <h3><i class="fas fa-edit"></i> Modifica Contenuto</h3>
          <div class="form-group">
            <label class="form-label" for="textInput-news1">Testo del post</label>
            <textarea id="textInput-news1" class="form-control" rows="4" placeholder="Scrivi il testo del post..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label" for="imageInput-news1">Immagine</label>
            <input type="file" id="imageInput-news1" class="form-control" accept="image/*">
          </div>
          <div class="controls-buttons">
            <button class="btn btn-success" onclick="saveNews(1)">
              <i class="fas fa-save"></i>
              <span>Salva</span>
            </button>
            <button class="btn btn-secondary" onclick="resetNews(1)">
              <i class="fas fa-undo"></i>
              <span>Cancella</span>
            </button>
          </div>
          <div class="success-message" id="success-news1">
            <i class="fas fa-check-circle"></i>
            <span>Contenuto salvato con successo!</span>
          </div>
        </div>
      </div>

      <!-- NEWS 2 -->
      <div class="tab-content" id="news2">
        <div class="social-tabs">
          <div class="social-tab facebook active" onclick="showSocial(2, 'facebook', event)">
            <i class="fab fa-facebook-f"></i> Facebook
          </div>
          <div class="social-tab linkedin" onclick="showSocial(2, 'linkedin', event)">
            <i class="fab fa-linkedin-in"></i> LinkedIn
          </div>
          <div class="social-tab twitter" onclick="showSocial(2, 'x', event)">
            <i class="fab fa-x-twitter"></i> X (Twitter)
          </div>
          <div class="social-tab instagram" onclick="showSocial(2, 'instagram', event)">
            <i class="fab fa-instagram"></i> Instagram
          </div>
        </div>

        <div id="news2-facebook" class="social-section active">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon facebook">
                  <i class="fab fa-facebook-f"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news2-facebook"></div>
              <img class="mockup-image" id="img-news2-facebook" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 55</span>
                <span><i class="fas fa-comment"></i> 16 commenti</span>
                <span><i class="fas fa-share"></i> Condividi</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news2-linkedin" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon linkedin">
                  <i class="fab fa-linkedin-in"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news2-linkedin"></div>
              <img class="mockup-image" id="img-news2-linkedin" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 176</span>
                <span><i class="fas fa-comment"></i> 11 commenti</span>
                <span><i class="fas fa-share"></i> 19 condivisioni</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news2-x" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon twitter">
                  <i class="fab fa-x-twitter"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>@PosteItaliane • 1h</p>
                </div>
              </div>
              <div class="mockup-text" id="text-news2-x"></div>
              <img class="mockup-image" id="img-news2-x" />
              <div class="mockup-footer">
                <span><i class="fas fa-comment"></i> 28</span>
                <span><i class="fas fa-retweet"></i> 72</span>
                <span><i class="fas fa-heart"></i> 266</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news2-instagram" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon instagram">
                  <i class="fab fa-instagram"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora</p>
                </div>
              </div>
              <img class="mockup-image" id="img-news2-instagram" />
              <div class="mockup-text" id="text-news2-instagram"></div>
              <div class="mockup-footer">
                <span><i class="fas fa-heart"></i> Piace a 118 persone</span>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <h3><i class="fas fa-edit"></i> Modifica Contenuto</h3>
          <div class="form-group">
            <label class="form-label" for="textInput-news2">Testo del post</label>
            <textarea id="textInput-news2" class="form-control" rows="4" placeholder="Scrivi il testo del post..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label" for="imageInput-news2">Immagine</label>
            <input type="file" id="imageInput-news2" class="form-control" accept="image/*">
          </div>
          <div class="controls-buttons">
            <button class="btn btn-success" onclick="saveNews(2)">
              <i class="fas fa-save"></i>
              <span>Salva</span>
            </button>
            <button class="btn btn-secondary" onclick="resetNews(2)">
              <i class="fas fa-undo"></i>
              <span>Cancella</span>
            </button>
          </div>
          <div class="success-message" id="success-news2">
            <i class="fas fa-check-circle"></i>
            <span>Contenuto salvato con successo!</span>
          </div>
        </div>
      </div>

      <!-- NEWS 3 -->
      <div class="tab-content" id="news3">
        <div class="social-tabs">
          <div class="social-tab facebook active" onclick="showSocial(3, 'facebook', event)">
            <i class="fab fa-facebook-f"></i> Facebook
          </div>
          <div class="social-tab linkedin" onclick="showSocial(3, 'linkedin', event)">
            <i class="fab fa-linkedin-in"></i> LinkedIn
          </div>
          <div class="social-tab twitter" onclick="showSocial(3, 'x', event)">
            <i class="fab fa-x-twitter"></i> X (Twitter)
          </div>
          <div class="social-tab instagram" onclick="showSocial(3, 'instagram', event)">
            <i class="fab fa-instagram"></i> Instagram
          </div>
        </div>

        <div id="news3-facebook" class="social-section active">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon facebook">
                  <i class="fab fa-facebook-f"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news3-facebook"></div>
              <img class="mockup-image" id="img-news3-facebook" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 55</span>
                <span><i class="fas fa-comment"></i> 16 commenti</span>
                <span><i class="fas fa-share"></i> Condividi</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news3-linkedin" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon linkedin">
                  <i class="fab fa-linkedin-in"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news3-linkedin"></div>
              <img class="mockup-image" id="img-news3-linkedin" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 176</span>
                <span><i class="fas fa-comment"></i> 11 commenti</span>
                <span><i class="fas fa-share"></i> 19 condivisioni</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news3-x" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon twitter">
                  <i class="fab fa-x-twitter"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>@PosteItaliane • 1h</p>
                </div>
              </div>
              <div class="mockup-text" id="text-news3-x"></div>
              <img class="mockup-image" id="img-news3-x" />
              <div class="mockup-footer">
                <span><i class="fas fa-comment"></i> 28</span>
                <span><i class="fas fa-retweet"></i> 72</span>
                <span><i class="fas fa-heart"></i> 266</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news3-instagram" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon instagram">
                  <i class="fab fa-instagram"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora</p>
                </div>
              </div>
              <img class="mockup-image" id="img-news3-instagram" />
              <div class="mockup-text" id="text-news3-instagram"></div>
              <div class="mockup-footer">
                <span><i class="fas fa-heart"></i> Piace a 118 persone</span>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <h3><i class="fas fa-edit"></i> Modifica Contenuto</h3>
          <div class="form-group">
            <label class="form-label" for="textInput-news3">Testo del post</label>
            <textarea id="textInput-news3" class="form-control" rows="4" placeholder="Scrivi il testo del post..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label" for="imageInput-news3">Immagine</label>
            <input type="file" id="imageInput-news3" class="form-control" accept="image/*">
          </div>
          <div class="controls-buttons">
            <button class="btn btn-success" onclick="saveNews(3)">
              <i class="fas fa-save"></i>
              <span>Salva</span>
            </button>
            <button class="btn btn-secondary" onclick="resetNews(3)">
              <i class="fas fa-undo"></i>
              <span>Cancella</span>
            </button>
          </div>
          <div class="success-message" id="success-news3">
            <i class="fas fa-check-circle"></i>
            <span>Contenuto salvato con successo!</span>
          </div>
        </div>
      </div>

      <!-- NEWS 4 -->
      <div class="tab-content" id="news4">
        <div class="social-tabs">
          <div class="social-tab facebook active" onclick="showSocial(4, 'facebook', event)">
            <i class="fab fa-facebook-f"></i> Facebook
          </div>
          <div class="social-tab linkedin" onclick="showSocial(4, 'linkedin', event)">
            <i class="fab fa-linkedin-in"></i> LinkedIn
          </div>
          <div class="social-tab twitter" onclick="showSocial(4, 'x', event)">
            <i class="fab fa-x-twitter"></i> X (Twitter)
          </div>
          <div class="social-tab instagram" onclick="showSocial(4, 'instagram', event)">
            <i class="fab fa-instagram"></i> Instagram
          </div>
        </div>

        <div id="news4-facebook" class="social-section active">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon facebook">
                  <i class="fab fa-facebook-f"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news4-facebook"></div>
              <img class="mockup-image" id="img-news4-facebook" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 55</span>
                <span><i class="fas fa-comment"></i> 16 commenti</span>
                <span><i class="fas fa-share"></i> Condividi</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news4-linkedin" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon linkedin">
                  <i class="fab fa-linkedin-in"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news4-linkedin"></div>
              <img class="mockup-image" id="img-news4-linkedin" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 176</span>
                <span><i class="fas fa-comment"></i> 11 commenti</span>
                <span><i class="fas fa-share"></i> 19 condivisioni</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news4-x" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon twitter">
                  <i class="fab fa-x-twitter"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>@PosteItaliane • 1h</p>
                </div>
              </div>
              <div class="mockup-text" id="text-news4-x"></div>
              <img class="mockup-image" id="img-news4-x" />
              <div class="mockup-footer">
                <span><i class="fas fa-comment"></i> 28</span>
                <span><i class="fas fa-retweet"></i> 72</span>
                <span><i class="fas fa-heart"></i> 266</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news4-instagram" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon instagram">
                  <i class="fab fa-instagram"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora</p>
                </div>
              </div>
              <img class="mockup-image" id="img-news4-instagram" />
              <div class="mockup-text" id="text-news4-instagram"></div>
              <div class="mockup-footer">
                <span><i class="fas fa-heart"></i> Piace a 118 persone</span>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <h3><i class="fas fa-edit"></i> Modifica Contenuto</h3>
          <div class="form-group">
            <label class="form-label" for="textInput-news4">Testo del post</label>
            <textarea id="textInput-news4" class="form-control" rows="4" placeholder="Scrivi il testo del post..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label" for="imageInput-news4">Immagine</label>
            <input type="file" id="imageInput-news4" class="form-control" accept="image/*">
          </div>
          <div class="controls-buttons">
            <button class="btn btn-success" onclick="saveNews(4)">
              <i class="fas fa-save"></i>
              <span>Salva</span>
            </button>
            <button class="btn btn-secondary" onclick="resetNews(4)">
              <i class="fas fa-undo"></i>
              <span>Cancella</span>
            </button>
          </div>
          <div class="success-message" id="success-news4">
            <i class="fas fa-check-circle"></i>
            <span>Contenuto salvato con successo!</span>
          </div>
        </div>
      </div>

      <!-- NEWS 5 -->
      <div class="tab-content" id="news5">
        <div class="social-tabs">
          <div class="social-tab facebook active" onclick="showSocial(5, 'facebook', event)">
            <i class="fab fa-facebook-f"></i> Facebook
          </div>
          <div class="social-tab linkedin" onclick="showSocial(5, 'linkedin', event)">
            <i class="fab fa-linkedin-in"></i> LinkedIn
          </div>
          <div class="social-tab twitter" onclick="showSocial(5, 'x', event)">
            <i class="fab fa-x-twitter"></i> X (Twitter)
          </div>
          <div class="social-tab instagram" onclick="showSocial(5, 'instagram', event)">
            <i class="fab fa-instagram"></i> Instagram
          </div>
        </div>

        <div id="news5-facebook" class="social-section active">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon facebook">
                  <i class="fab fa-facebook-f"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news5-facebook"></div>
              <img class="mockup-image" id="img-news5-facebook" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 55</span>
                <span><i class="fas fa-comment"></i> 16 commenti</span>
                <span><i class="fas fa-share"></i> Condividi</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news5-linkedin" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon linkedin">
                  <i class="fab fa-linkedin-in"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora • <i class="fas fa-globe-americas"></i></p>
                </div>
              </div>
              <div class="mockup-text" id="text-news5-linkedin"></div>
              <img class="mockup-image" id="img-news5-linkedin" />
              <div class="mockup-footer">
                <span><i class="fas fa-thumbs-up"></i> 176</span>
                <span><i class="fas fa-comment"></i> 11 commenti</span>
                <span><i class="fas fa-share"></i> 19 condivisioni</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news5-x" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon twitter">
                  <i class="fab fa-x-twitter"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>@PosteItaliane • 1h</p>
                </div>
              </div>
              <div class="mockup-text" id="text-news5-x"></div>
              <img class="mockup-image" id="img-news5-x" />
              <div class="mockup-footer">
                <span><i class="fas fa-comment"></i> 28</span>
                <span><i class="fas fa-retweet"></i> 72</span>
                <span><i class="fas fa-heart"></i> 266</span>
              </div>
            </div>
          </div>
        </div>

        <div id="news5-instagram" class="social-section">
          <div class="mockup-preview">
            <div class="mockup-container">
              <div class="mockup-header">
                <div class="platform-icon instagram">
                  <i class="fab fa-instagram"></i>
                </div>
                <div class="platform-info">
                  <h3>Poste Italiane</h3>
                  <p>1 ora</p>
                </div>
              </div>
              <img class="mockup-image" id="img-news5-instagram" />
              <div class="mockup-text" id="text-news5-instagram"></div>
              <div class="mockup-footer">
                <span><i class="fas fa-heart"></i> Piace a 118 persone</span>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <h3><i class="fas fa-edit"></i> Modifica Contenuto</h3>
          <div class="form-group">
            <label class="form-label" for="textInput-news5">Testo del post</label>
            <textarea id="textInput-news5" class="form-control" rows="4" placeholder="Scrivi il testo del post..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label" for="imageInput-news5">Immagine</label>
            <input type="file" id="imageInput-news5" class="form-control" accept="image/*">
          </div>
          <div class="controls-buttons">
            <button class="btn btn-success" onclick="saveNews(5)">
              <i class="fas fa-save"></i>
              <span>Salva</span>
            </button>
            <button class="btn btn-secondary" onclick="resetNews(5)">
              <i class="fas fa-undo"></i>
              <span>Cancella</span>
            </button>
          </div>
          <div class="success-message" id="success-news5">
            <i class="fas fa-check-circle"></i>
            <span>Contenuto salvato con successo!</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Generazione file in corso...</p>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script>
    // Storage in memoria per sostituire localStorage
    const memoryStorage = {
      data: {},
      setItem: function(key, value) {
        this.data[key] = value;
      },
      getItem: function(key) {
        return this.data[key] || null;
      },
      removeItem: function(key) {
        delete this.data[key];
      },
      clear: function() {
        this.data = {};
      }
    };

    // Funzione di debug per verificare gli elementi
    function debugElements() {
      console.log('=== DEBUG ELEMENTI ===');
      for (let i = 1; i <= 5; i++) {
        ['facebook', 'linkedin', 'x', 'instagram'].forEach(net => {
          const textId = 'text-news' + i + '-' + net;
          const imgId = 'img-news' + i + '-' + net;
          const textEl = document.getElementById(textId);
          const imgEl = document.getElementById(imgId);
          
          if (!textEl) console.warn('Elemento testo mancante:', textId);
          if (!imgEl) console.warn('Elemento immagine mancante:', imgId);
        });
        
        const textInputId = 'textInput-news' + i;
        const imageInputId = 'imageInput-news' + i;
        const textInputEl = document.getElementById(textInputId);
        const imageInputEl = document.getElementById(imageInputId);
        
        if (!textInputEl) console.warn('Input testo mancante:', textInputId);
        if (!imageInputEl) console.warn('Input immagine mancante:', imageInputId);
      }
      console.log('=== FINE DEBUG ===');
    }

    function showNews(id, event) {
      document.querySelectorAll('.tab-content').forEach(div => div.classList.remove('active'));
      document.querySelectorAll('.news-tabs button').forEach(btn => btn.classList.remove('active'));
      document.getElementById('news' + id).classList.add('active');
      event.target.classList.add('active');
    }

    function showSocial(newsIndex, platform, event) {
      document.querySelectorAll(`#news${newsIndex} .social-section`).forEach(div => div.classList.remove('active'));
      document.querySelectorAll(`#news${newsIndex} .social-tab`).forEach(btn => btn.classList.remove('active'));
      document.getElementById(`news${newsIndex}-${platform}`).classList.add('active');
      event.target.classList.add('active');
    }

    function formatText(text) {
      return text.replace(/(#[\w\d]+|@[\w\d]+|https?:\/\/\S+)/g, m => '<span class="link">' + m + '</span>');
    }

    function showSuccessMessage(index) {
      const message = document.getElementById('success-news' + index);
      message.classList.add('show');
      setTimeout(() => {
        message.classList.remove('show');
      }, 3000);
    }

    function setButtonLoading(button, loading) {
      if (loading) {
        button.classList.add('loading');
        button.disabled = true;
        const span = button.querySelector('span');
        if (span) {
          span.dataset.originalText = span.textContent;
          span.textContent = 'Salvataggio...';
        }
      } else {
        button.classList.remove('loading');
        button.disabled = false;
        const span = button.querySelector('span');
        if (span && span.dataset.originalText) {
          span.textContent = span.dataset.originalText;
        }
      }
    }

    function saveNews(index) {
      const saveBtn = document.querySelector(`#news${index} .btn-success`);
      setButtonLoading(saveBtn, true);

      setTimeout(() => {
        try {
          const textInput = document.getElementById('textInput-news' + index);
          if (!textInput) {
            console.error('Input testo non trovato per news' + index);
            setButtonLoading(saveBtn, false);
            return;
          }

          const text = textInput.value;
          const formatted = formatText(text);
          
          const activeSection = document.querySelector('#news' + index + ' .social-section.active');
          if (!activeSection) {
            console.error('Sezione social attiva non trovata per news' + index);
            setButtonLoading(saveBtn, false);
            return;
          }

          const activeTab = activeSection.id.split('-')[2];
          
          const textElement = document.getElementById('text-news' + index + '-' + activeTab);
          if (textElement) {
            textElement.innerHTML = formatted;
          }

          if (activeTab === 'facebook') {
            ['linkedin', 'x', 'instagram'].forEach(net => {
              const targetTextElement = document.getElementById('text-news' + index + '-' + net);
              if (targetTextElement) {
                targetTextElement.innerHTML = formatted;
              }
            });
          }

          memoryStorage.setItem('text' + index + '-' + activeTab, text);

          const imgEl = document.getElementById('img-news' + index + '-' + activeTab);
          if (imgEl && imgEl.src && imgEl.src.startsWith('data')) {
            memoryStorage.setItem('img' + index + '-' + activeTab, imgEl.src);
            if (activeTab === 'facebook') {
              ['linkedin', 'x', 'instagram'].forEach(net => {
                const tgt = document.getElementById('img-news' + index + '-' + net);
                if (tgt) {
                  tgt.src = imgEl.src;
                  tgt.style.display = 'block';
                }
              });
            }
          }

          setButtonLoading(saveBtn, false);
          showSuccessMessage(index);
        } catch (error) {
          console.error('Errore durante il salvataggio:', error);
          setButtonLoading(saveBtn, false);
        }
      }, 800);
    }

    function resetNews(index) {
      try {
        ['facebook', 'linkedin', 'x', 'instagram'].forEach(net => {
          memoryStorage.removeItem('text' + index + '-' + net);
          memoryStorage.removeItem('img' + index + '-' + net);
          
          const textElement = document.getElementById('text-news' + index + '-' + net);
          if (textElement) {
            textElement.innerHTML = '';
          }
          
          const img = document.getElementById('img-news' + index + '-' + net);
          if (img) {
            img.src = '';
            img.style.display = 'none';
          }
        });
        
        const textInput = document.getElementById('textInput-news' + index);
        if (textInput) {
          textInput.value = '';
        }
        
        const imageInput = document.getElementById('imageInput-news' + index);
        if (imageInput) {
          imageInput.value = null;
        }
      } catch (error) {
        console.error('Errore durante il reset:', error);
      }
    }

    function resetAllNews() {
      if (confirm('Sei sicuro di voler cancellare tutti i contenuti?')) {
        for (let i = 1; i <= 5; i++) {
          resetNews(i);
        }
        memoryStorage.clear();
      }
    }

    function downloadAllAsZip() {
      const loadingOverlay = document.getElementById('loadingOverlay');
      loadingOverlay.style.display = 'flex';

      const zip = new JSZip();
      const activeNews = document.querySelector('.tab-content.active');
      const newsId = activeNews.id;

      const socialSections = activeNews.querySelectorAll('.social-section');

      let done = 0;
      const total = socialSections.length;

      socialSections.forEach((section, index) => {
        const wasHidden = !section.classList.contains('active');
        if (wasHidden) section.classList.add('active');

        const mockup = section.querySelector('.mockup-container');
        if (mockup) {
          html2canvas(mockup, {
            scale: 2,
            useCORS: true,
            allowTaint: true
          }).then(canvas => {
            canvas.toBlob(blob => {
              const platforms = ["Facebook", "LinkedIn", "X", "Instagram"];
              const filename = `${newsId}_${platforms[index]}.jpg`;
              zip.file(filename, blob);
              done++;
              if (done === total) {
                zip.generateAsync({ type: 'blob' }).then(content => {
                  saveAs(content, `${newsId}_mockups.zip`);
                  loadingOverlay.style.display = 'none';
                });
              }
            }, 'image/jpeg', 0.9);
          });
        }

        if (wasHidden) section.classList.remove('active');
      });
    }

    window.onload = () => {
      // Debug per verificare tutti gli elementi
      setTimeout(() => {
        debugElements();
      }, 100);

      for (let i = 1; i <= 5; i++) {
        ['facebook', 'linkedin', 'x', 'instagram'].forEach(net => {
          const t = memoryStorage.getItem('text' + i + '-' + net);
          const img = memoryStorage.getItem('img' + i + '-' + net);
          if (t) {
            const textElement = document.getElementById('text-news' + i + '-' + net);
            if (textElement) {
              textElement.innerHTML = formatText(t);
              if (net === 'facebook') {
                const inputElement = document.getElementById('textInput-news' + i);
                if (inputElement) {
                  inputElement.value = t;
                }
              }
            }
          }
          if (img) {
            const imageElement = document.getElementById('img-news' + i + '-' + net);
            if (imageElement) {
              imageElement.src = img;
              imageElement.style.display = 'block';
            }
          }
        });

        const input = document.getElementById('imageInput-news' + i);
        if (input) {
          input.addEventListener('change', (function(newsIndex) {
            return function(e) {
              const file = e.target.files[0];
              if (!file) return;
              
              const reader = new FileReader();
              reader.onload = () => {
                try {
                  const activeSection = document.querySelector('#news' + newsIndex + ' .social-section.active');
                  if (!activeSection) {
                    console.error('Nessuna sezione social attiva trovata per news' + newsIndex);
                    return;
                  }
                  
                  const activeTab = activeSection.id.split('-')[2];
                  const imgId = 'img-news' + newsIndex + '-' + activeTab;
                  const img = document.getElementById(imgId);
                  
                  if (!img) {
                    console.error('Elemento immagine non trovato:', imgId);
                    console.log('Sezione attiva:', activeSection.id);
                    console.log('Tab attivo:', activeTab);
                    return;
                  }
                  
                  img.src = reader.result;
                  img.style.display = 'block';
                  console.log('Immagine caricata con successo in:', imgId);
                } catch (error) {
                  console.error('Errore durante il caricamento dell\'immagine:', error);
                }
              };
              
              reader.onerror = () => {
                console.error('Errore durante la lettura del file');
              };
              
              reader.readAsDataURL(file);
            };
          })(i));
        } else {
          console.warn('Input file non trovato per news' + i);
        }
      }
    };
  </script>
</body>
</html>
